# secrets.env.example
# ---------------------------------------------------------------------------
# Copy to secrets.env and edit. All filenames are relative to ./config unless
# otherwise noted. Private keys: filename WITHOUT ".pub"; Public keys: WITH ".pub"
# ---------------------------------------------------------------------------

#=============================================================================
# Module: SSH   (Global defaults, per-account PUBLIC keys, per-service PRIVATE keys)
#=============================================================================
# Directory where SSH key files are stored (relative to repo root)
SSH_KEY_DIR=config

# ---- Global defaults --------------------------------------------------------
# If an account/service override is blank, these defaults are used.
SSH_PUBLIC_KEY_DEFAULT=main_id_ed25519.pub
SSH_PRIVATE_KEY_DEFAULT=main_id_ed25519

# ---- Accounts that accept inbound SSH (public keys → authorized_keys) -------
# List all local accounts that should receive authorized_keys
SSH_ACCOUNTS="admin obsidian git"

# Per-account public key overrides (optional). Leave blank to use the global default.
# Add extra public keys via *_EXTRA_FILES (space-separated filenames).
# To auto-append all *.pub from SSH_EXTRA_KEYS_DIR for a given account, set
# *_EXTRA_FROM_DIR=true (per-account opt-in).
SSH_EXTRA_KEYS_DIR=extra_authorized_keys.d

SSH_ADMIN_PUBLIC=
SSH_ADMIN_EXTRA_FILES=""
SSH_ADMIN_EXTRA_FROM_DIR=true

SSH_OBSIDIAN_PUBLIC=
SSH_OBSIDIAN_EXTRA_FILES=""
SSH_OBSIDIAN_EXTRA_FROM_DIR=false

SSH_GIT_PUBLIC=
SSH_GIT_EXTRA_FILES=""
SSH_GIT_EXTRA_FROM_DIR=false

# ---- Outbound SSH identities (private keys for services we connect TO) ------
# Declare services that require a private key (e.g., GitHub, GitLab). For each
# service in SSH_OUTBOUND_SERVICES, set SSH_<SERVICE>_PRIVATE as needed.
SSH_OUTBOUND_SERVICES="github"

# If blank, falls back to SSH_PRIVATE_KEY_DEFAULT
SSH_GITHUB_PRIVATE=github_id_ed25519
# Example additional services:
# SSH_GITLAB_PRIVATE=
# SSH_BITBUCKET_PRIVATE=

#=============================================================================
# Module: Base System
#=============================================================================
INTERFACE=em0
GIT_SERVER=192.0.2.10
NETMASK=255.255.255.0
GATEWAY=192.0.2.1
DNS1=1.1.1.1
DNS2=9.9.9.9

# Primary administrative user (local login)
ADMIN_USER=admin
# Optional plaintext password for ADMIN_USER (leave empty to disable password login)
ADMIN_PASSWORD=

#=============================================================================
# Module: Obsidian Git Host (server-side)
#=============================================================================
# Local accounts used by this module (names only; SSH keys configured in Module: SSH)
OBS_USER=obsidian
GIT_USER=git

# Server-side vault/bare repo name
VAULT=vault

#=============================================================================
# Module: Obsidian Git Client (workstation-side)
#=============================================================================
# Workstation vault directory name (relative to user's Documents/ or your script’s convention)
CLIENT_VAULT=vault

#=============================================================================
# Module: GitHub (example outbound service)
#=============================================================================
# Local working directory and remote URL; SSH key selection lives in Module: SSH
LOCAL_DIR=/home/admin/example
GITHUB_REPO=git@github.com:example/example.git

#=============================================================================
# Notes & Conventions
#=============================================================================
# - Keep ALL SSH key selection in "Module: SSH".
# - Modules below only declare usernames, paths, or remotes.
# - To add a new local account that needs SSH access:
#     1) Add the username to SSH_ACCOUNTS
#     2) Add SSH_<USER_UPPER>_PUBLIC (optional), *_EXTRA_FILES, *_EXTRA_FROM_DIR
# - To add a new outbound service:
#     1) Append its slug to SSH_OUTBOUND_SERVICES (e.g., "github gitlab")
#     2) Add SSH_<SERVICE_UPPER>_PRIVATE (optional; else default is used)

